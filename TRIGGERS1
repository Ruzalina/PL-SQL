TRIGGERS1


REATE TABLE HR.EMP_TRIGGER
(EMPID NUMBER,
EMP_NAME VARCHAR2(15),
DEPTID NUMBER,
SALARY NUMBER);

INSERT INTO HR.EMP_TRIGGER VALUES(1,’ABDUL’,10,1000);
INSERT INTO HR.EMP_TRIGGER VALUES(2,’KEMRAN’,40,4000);
COMMIT;

CREATE OR REPLACE TRIGGER TR_EMPL_SALARY
AFTER UPDATE OF SALARY 
ON HR.EMP_TRIGGER
FOR EACH ROW
BEGIN
INSERT INTO HR.EMPL_SAL_AUDIT VALUES(:OLD.EMPID,:OLD.SALARY,:NEW.SALARY, SYSDATE, USER);
END;
/

CREATE TABLE HR.EMPL_SAL_AUDIT
(EMPID NUMBER,
OLD_SALARY NUMBER,
NEW_SALARY NUMBER,
UPDATED_AT DATE,
UPDATED_BY VARCHAR2(100));

UPDATE HR.EMP_TRIGGER
SET SALARY=800
WHERE EMPID=1;
COMMIT;

SELECT *
FROM HR.EMPL_SAL_AUDIT;